p8105_hw2_zj2358
================
Zhezheng Jin
2023-10-02

## Problem 1

data clean of pols_month

``` r
pols_month = read_csv(file = "pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(month = month.name[as.integer(month)],
         president = ifelse(prez_dem == 1, "dem", ifelse(prez_gop == 1, "gop", NA))) %>%
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month
```

    ## # A tibble: 822 × 9
    ##    year  month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <chr> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ##  1 1947  January        23      51     253      23      45     198 dem      
    ##  2 1947  February       23      51     253      23      45     198 dem      
    ##  3 1947  March          23      51     253      23      45     198 dem      
    ##  4 1947  April          23      51     253      23      45     198 dem      
    ##  5 1947  May            23      51     253      23      45     198 dem      
    ##  6 1947  June           23      51     253      23      45     198 dem      
    ##  7 1947  July           23      51     253      23      45     198 dem      
    ##  8 1947  August         23      51     253      23      45     198 dem      
    ##  9 1947  September      23      51     253      23      45     198 dem      
    ## 10 1947  October        23      51     253      23      45     198 dem      
    ## # ℹ 812 more rows

data clean of snp

``` r
snp = read_csv(file = "snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("month", "day", "year"), sep = "/") %>%
  mutate(year = ifelse(year >= 0 & year <= 15, paste("20", year, sep = ""), paste("19", year, sep = ""))) %>%
  mutate(month = month.name[as.integer(month)]) %>%
  arrange(year, month) %>%
  select(year, month, day, everything()) %>%
  select(-day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp
```

    ## # A tibble: 787 × 3
    ##    year  month    close
    ##    <chr> <chr>    <dbl>
    ##  1 1950  April     18.0
    ##  2 1950  August    18.4
    ##  3 1950  December  20.4
    ##  4 1950  February  17.2
    ##  5 1950  January   17.0
    ##  6 1950  July      17.8
    ##  7 1950  June      17.7
    ##  8 1950  March     17.3
    ##  9 1950  May       18.8
    ## 10 1950  November  19.5
    ## # ℹ 777 more rows

tidy data unemployment

``` r
unemployment = read_csv(file = "unemployment.csv") %>%
  pivot_longer(cols = -Year, names_to = "month", values_to = "unemployment") %>%
  mutate(month = tolower(month)) %>%
  mutate(month = case_when(
    month %in% c("jan", "january") ~ "January",
    month %in% c("feb", "february") ~ "February",
    month %in% c("mar", "march") ~ "March",
    month %in% c("apr", "april") ~ "April",
    month %in% c("may") ~ "May",
    month %in% c("jun", "june") ~ "June",
    month %in% c("jul", "july") ~ "July",
    month %in% c("aug", "august") ~ "August",
    month %in% c("sep", "september") ~ "September",
    month %in% c("oct", "october") ~ "October",
    month %in% c("nov", "november") ~ "November",
    month %in% c("dec", "december") ~ "December",
    TRUE ~ NA_character_
  )) %>%
  select(year=Year, month, unemployment, everything())
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment
```

    ## # A tibble: 816 × 3
    ##     year month     unemployment
    ##    <dbl> <chr>            <dbl>
    ##  1  1948 January            3.4
    ##  2  1948 February           3.8
    ##  3  1948 March              4  
    ##  4  1948 April              3.9
    ##  5  1948 May                3.5
    ##  6  1948 June               3.6
    ##  7  1948 July               3.6
    ##  8  1948 August             3.9
    ##  9  1948 September          3.8
    ## 10  1948 October            3.7
    ## # ℹ 806 more rows

merge datasets

``` r
merged_data <- inner_join(pols_month, snp, by = c("year", "month"))
unemployment$year <- as.character(unemployment$year)
final_data <- inner_join(merged_data, unemployment, by = c("year", "month"))

final_data
```

    ## # A tibble: 786 × 11
    ##    year  month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##    <chr> <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ##  1 1950  January      18      44     177      29      57     269 dem        17.0
    ##  2 1950  Februa…      18      44     177      29      57     269 dem        17.2
    ##  3 1950  March        18      44     177      29      57     269 dem        17.3
    ##  4 1950  April        18      44     177      29      57     269 dem        18.0
    ##  5 1950  May          18      44     177      29      57     269 dem        18.8
    ##  6 1950  June         18      44     177      29      57     269 dem        17.7
    ##  7 1950  July         18      44     177      29      57     269 dem        17.8
    ##  8 1950  August       18      44     177      29      57     269 dem        18.4
    ##  9 1950  Septem…      18      44     177      29      57     269 dem        19.5
    ## 10 1950  October      18      44     177      29      57     269 dem        19.5
    ## # ℹ 776 more rows
    ## # ℹ 1 more variable: unemployment <dbl>

The dataset `final_data` comprises three primary sources of data, each
contributing unique insights. Firstly, `pols_month` offers political
data, containing information about the monthly representation of both
Republican and Democratic officials at the levels of governor, senator,
and representative. Secondly, `snp` contributes financial data,
providing monthly closing values for the S&P stock index, which is often
used as a benchmark for stock market performance. Lastly, `unemployment`
presents economic data in a wide format, featuring monthly unemployment
rates. The merged `final_data` dataset seamlessly combines these
sources, resulting in a comprehensive dataset with 786 rows and 11
columns. The dataset spans from 1950, 2015, encompassing a wide range of
historical information. Key variables in the dataset include year,
month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep_dem, president,
close, unemployment.

## Problem 2

Read and Clean: MTW

``` r
mtw_df = read_excel(
  "202207 Trash Wheel Collection Data.xlsx",
  cell_cols("A:N"),
  sheet = "Mr. Trash Wheel") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(homes_powered_N = weight_tons*500/30,
         wheel_type = c("MT")) %>% 
  relocate(wheel_type,dumpster,year,month) 
mtw_df
```

    ## # A tibble: 547 × 16
    ##    wheel_type dumpster year  month date                weight_tons
    ##    <chr>         <dbl> <chr> <chr> <dttm>                    <dbl>
    ##  1 MT                1 2014  May   2014-05-16 00:00:00        4.31
    ##  2 MT                2 2014  May   2014-05-16 00:00:00        2.74
    ##  3 MT                3 2014  May   2014-05-16 00:00:00        3.45
    ##  4 MT                4 2014  May   2014-05-17 00:00:00        3.1 
    ##  5 MT                5 2014  May   2014-05-17 00:00:00        4.06
    ##  6 MT                6 2014  May   2014-05-20 00:00:00        2.71
    ##  7 MT                7 2014  May   2014-05-21 00:00:00        1.91
    ##  8 MT                8 2014  May   2014-05-28 00:00:00        3.7 
    ##  9 MT                9 2014  June  2014-06-05 00:00:00        2.52
    ## 10 MT               10 2014  June  2014-06-11 00:00:00        3.76
    ## # ℹ 537 more rows
    ## # ℹ 10 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <dbl>,
    ## #   homes_powered <dbl>, homes_powered_N <dbl>

Read and Clean: PTW

``` r
ptw_df = read_excel(
  "202207 Trash Wheel Collection Data.xlsx",
  cell_cols("A:M"),
  sheet = "Professor Trash Wheel") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(homes_powered_N = weight_tons*500/30,
         wheel_type = c("PT")) %>% 
  relocate(wheel_type,dumpster,year,month) 
ptw_df
```

    ## # A tibble: 94 × 15
    ##    wheel_type dumpster  year month    date                weight_tons
    ##    <chr>         <dbl> <dbl> <chr>    <dttm>                    <dbl>
    ##  1 PT                1  2017 January  2017-01-02 00:00:00        1.79
    ##  2 PT                2  2017 January  2017-01-30 00:00:00        1.58
    ##  3 PT                3  2017 February 2017-02-26 00:00:00        2.32
    ##  4 PT                4  2017 February 2017-02-26 00:00:00        3.72
    ##  5 PT                5  2017 February 2017-02-28 00:00:00        1.45
    ##  6 PT                6  2017 March    2017-03-30 00:00:00        1.71
    ##  7 PT                7  2017 April    2017-04-01 00:00:00        1.82
    ##  8 PT                8  2017 April    2017-04-20 00:00:00        2.37
    ##  9 PT                9  2017 May      2017-05-10 00:00:00        2.64
    ## 10 PT               10  2017 May      2017-05-26 00:00:00        2.78
    ## # ℹ 84 more rows
    ## # ℹ 9 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, homes_powered <dbl>,
    ## #   homes_powered_N <dbl>

Read and Clean: GTW

``` r
gtw_df = read_excel(
  "202207 Trash Wheel Collection Data.xlsx",
  cell_cols("A:K"),
  sheet = "Gwynnda Trash Wheel") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(homes_powered_N = weight_tons*500/30,
         wheel_type = c("GT")) %>% 
  relocate(wheel_type,dumpster,year,month) 
gtw_df
```

    ## # A tibble: 106 × 13
    ##    wheel_type dumpster  year month  date                weight_tons
    ##    <chr>         <dbl> <dbl> <chr>  <dttm>                    <dbl>
    ##  1 GT                1  2021 July   2021-07-03 00:00:00        0.93
    ##  2 GT                2  2021 July   2021-07-07 00:00:00        2.26
    ##  3 GT                3  2021 July   2021-07-07 00:00:00        1.62
    ##  4 GT                4  2021 July   2021-07-16 00:00:00        1.76
    ##  5 GT                5  2021 July   2021-07-30 00:00:00        1.53
    ##  6 GT                6  2021 August 2021-08-11 00:00:00        2.06
    ##  7 GT                7  2021 August 2021-08-14 00:00:00        1.9 
    ##  8 GT                8  2021 August 2021-08-16 00:00:00        2.16
    ##  9 GT                9  2021 August 2021-08-16 00:00:00        2.6 
    ## 10 GT               10  2021 August 2021-08-17 00:00:00        3.21
    ## # ℹ 96 more rows
    ## # ℹ 7 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, plastic_bags <dbl>,
    ## #   homes_powered <dbl>, homes_powered_N <dbl>

Combine them together

``` r
mtw_df$year <- as.double(mtw_df$year)
combined_df <- bind_rows(mtw_df, ptw_df, gtw_df)
combined_df
```

    ## # A tibble: 747 × 17
    ##    wheel_type dumpster  year month date                weight_tons
    ##    <chr>         <dbl> <dbl> <chr> <dttm>                    <dbl>
    ##  1 MT                1  2014 May   2014-05-16 00:00:00        4.31
    ##  2 MT                2  2014 May   2014-05-16 00:00:00        2.74
    ##  3 MT                3  2014 May   2014-05-16 00:00:00        3.45
    ##  4 MT                4  2014 May   2014-05-17 00:00:00        3.1 
    ##  5 MT                5  2014 May   2014-05-17 00:00:00        4.06
    ##  6 MT                6  2014 May   2014-05-20 00:00:00        2.71
    ##  7 MT                7  2014 May   2014-05-21 00:00:00        1.91
    ##  8 MT                8  2014 May   2014-05-28 00:00:00        3.7 
    ##  9 MT                9  2014 June  2014-06-05 00:00:00        2.52
    ## 10 MT               10  2014 June  2014-06-11 00:00:00        3.76
    ## # ℹ 737 more rows
    ## # ℹ 11 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <dbl>,
    ## #   homes_powered <dbl>, homes_powered_N <dbl>, plastic_bags <dbl>

The dataset `combined_df` comprises data from three trash-collecting
entities: Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda Trash
Wheel. In total, there are 747 observations in the combined dataset,
representing various trash collection events. Key variables include
trash_weight, which denotes the weight of trash collected during each
event, and homes_powered, representing the approximate number of homes
powered by the collected trash. The total weight of trash collected by
Professor Trash Wheel is 190.12 tons, and the total number of cigarette
butts collected by Gwynnda in July 2021 is 17100.

## Problem 3
